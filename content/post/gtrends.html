---
title: "tendencia en búsquedas Google"
author: "Roberto Gil"
date: "2021-01-14"
slug: gtrends
categories:
  - R
  - analisis
tags:
  - covid
  - integra
  - grafico
  - grafico tendencia
  - google
  - trends
  - google trends
codeMaxLines: 10
codeLineNumbers: no
figurePositionShow: yes
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<script src="/rmarkdown-libs/proj4js/proj4.js"></script>
<link href="/rmarkdown-libs/highcharts/css/motion.css" rel="stylesheet" />
<script src="/rmarkdown-libs/highcharts/highcharts.js"></script>
<script src="/rmarkdown-libs/highcharts/highcharts-3d.js"></script>
<script src="/rmarkdown-libs/highcharts/highcharts-more.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/stock.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/map.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/annotations.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/data.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/drilldown.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/item-series.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/offline-exporting.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/overlapping-datalabels.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/exporting.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/export-data.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/funnel.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/heatmap.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/treemap.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/sankey.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/dependency-wheel.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/organization.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/solid-gauge.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/streamgraph.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/sunburst.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/vector.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/wordcloud.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/xrange.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/tilemap.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/venn.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/gantt.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/timeline.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/parallel-coordinates.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/bullet.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/coloraxis.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/dumbbell.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/lollipop.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/series-label.js"></script>
<script src="/rmarkdown-libs/highcharts/plugins/motion.js"></script>
<script src="/rmarkdown-libs/highcharts/custom/reset.js"></script>
<script src="/rmarkdown-libs/highcharts/modules/boost.js"></script>
<script src="/rmarkdown-libs/highchart-binding/highchart.js"></script>


<div id="tendencia-de-búsquedas" class="section level2">
<h2>Tendencia de búsquedas</h2>
<p>R dispone de multitud de paquetes o bibliotecas que nos facilitan la consulta a distintas fuentes de datos web. En concreto, para poder consultar y analizar las tendencias en las búsquedas que se hacen con Google, Google Trends, tenemos entre otros el paquete <code>gtrendsR</code>.</p>
<p>A nadie se le escapa el interés que comprender la utilidad de la herramienta Google Trends en el momento de la investigación de las palabras clave o de u_topic_ de trabajo que deseamos analizar. Vamos a ver un modo de analizar rápidamente esos datos con R. El paquete de referencia <code>gtrends</code> está alojado en CRAN siendo su uso gratuito. Instálalo en tu entorno de trabajo R y veamos cuales son su posibilidades.</p>
<p>Instalamos los paquetes necesarios para nuestro trabajo; si ya los tienes, obvia la instalación y sólo carga las librerías.</p>
<pre class="r"><code>#install.packages(&quot;gtrendsR&quot;)
#install.packages(&quot;dplyr&quot;)
#install.packages(&quot;highcharter&quot;)
library(gtrendsR)
library(dplyr) 
library(highcharter)</code></pre>
<p>Como decíamos el paquete gtrendsR nos permite consultar la API de Google Trends de forma sencilla y rápida mediante la función <code>gtrends()</code>. Veamos sus posibilidades con los parámetros de la consulta:</p>
<ul>
<li><code>keyword</code>, un vector de caracteres con las palabras clave que se quieren consultar en Google Trends.
<ul>
<li>Por ejemplo: <code>gtrends(c("investigación de mercados", "investigación comercial"))</code></li>
</ul></li>
<li><code>geo</code>, un vector de caracteres con los países o regiones geográficas que se quieren consultar. Estos códigos siguen el estándar ISO-3166-2. Por defecto tienen el valor <code>all</code> para consultas globales.
<ul>
<li>Por ejemplo: <code>gtrends("COVID", c("ES", "FR", "PT"))</code> consulta la tendencia de la palabra COVID en España, Francia y Portugal. Si quieres consultar el listado de regiones geográficas disponibles, indicalo con <code>countries</code>.</li>
</ul></li>
<li><code>time</code>, texto que especifica el período temporal de consulta; por defecto los últimos cinco años, pero sus posibles valores son:
<ul>
<li><code>now 1-H</code>. Última hora.</li>
<li><code>now 4-H</code>. Últimas cuatro horas.</li>
<li><code>now 1-d</code>. Último día.</li>
<li><code>now 7-d</code>. Últimos siete días.</li>
<li><code>today 1-m</code>. Últimos 30 días.</li>
<li><code>today 3-m</code>. Últimos 90 días.</li>
<li><code>today 12-m</code>. Últimos 12 meses.</li>
<li><code>today+5-y</code>. Últimos cinco años (por defecto).</li>
<li><code>all</code>. Todo desde el comienzo de Google Trends (2004).</li>
<li><code>Y-m-d Y-m-d</code>. Rango temporal entre dos fechas (ej.: “2010-01-01 2010-04-03”)</li>
</ul></li>
<li><code>gprop</code>, texto que especifica el producto de Google para el cual se pide información. Las opciones válidas son <code>web</code>(por defecto), <code>news</code>, <code>images</code>, <code>froogle</code> y <code>youtube</code>.</li>
<li><code>category</code>, un carácter indicando el identificador de categoría de búsqueda que queremos filtrat. Por defecto es 0 y significa que incluye Todas las categorías. Hay más de 1400 categorías y pueden ser consultadas, una vez cargado el paquete gtrendsR con el comando <code>categories</code>. Si por ejemplo queremos filtrar la búsqueda por el ámbito de las motocicletas podemos especificar category=”273″.</li>
<li><code>hl</code>, un texto especificando el código ISO-639-1 y que puede ser seguido del código de país. Por defecto es hl=”en-US”. Para español es hl=”es”; para español de España: “es-ES”. Solo afecta a los resultados obtenidos en los temas o búsquedas relacionadas.</li>
<li><code>low_search_volume</code> booleano (TRUE / FALSE) que indica si se debe incluir o no en los resultados, aquellos de regiones con bajo volumen de búsqueda. Es muy útil ponerlo a TRUE cuando estamos analizando palabras poco buscadas.</li>
<li><code>cookie_url</code>, un texto especificando la URL de la que obtener las cookies; no se debe usar por defecto y la recomendamos sólo para usuarios avanzados.</li>
</ul>
<div id="ejemplos-de-búsqueda" class="section level3">
<h3>Ejemplos de búsqueda</h3>
<blockquote>
<p>Búsqueda de la palabra “VCF” en España durante el último mes</p>
</blockquote>
<pre class="r"><code>result1 &lt;- gtrends(keyword=&quot;Valencia CF&quot;, geo=&quot;ES&quot;, time=&quot;today 12-m&quot;, hl=&quot;es-ES&quot;)</code></pre>
<blockquote>
<p>Búsqueda de la palabra “Valencia CF” y también “Peter Lim” en España durante los últimos 30 días.</p>
</blockquote>
<pre class="r"><code>result2 &lt;- gtrends(keyword=c(&quot;Valencia CF&quot;, &quot;Peter Lim&quot;), geo=c(&quot;ES&quot;,&quot;ES&quot;), time=&quot;today 1-m&quot;, hl=&quot;es-ES&quot;)</code></pre>
</div>
</div>
<div id="qué-nos-dicen-los-resultados" class="section level2">
<h2>¿Qué nos dicen los resultados?</h2>
<div id="interest_over_time" class="section level3">
<h3><code>interest_over_time</code></h3>
<p>Nos proporciona datos temporales de una o varias palabras clave y contiene los siguientes campos:</p>
<ul>
<li><code>date</code>, de clase Date, en formato yyyy-mm-dd.</li>
<li><code>hits</code>, de clase carácter, es el interés de la búsqueda, siendo 100 el momento de mayor interés y todos los demás valores relativos a él. Es decir, si en septiembre de 2010 hubo un interés 100 y en enero de 2011 un interés 50, quiere decir que el interés por esa búsqueda en enero de 2011 fue la mitad que en septiembre de 2010.</li>
<li><code>keyword</code>, de clase carácter, la palabra clave que ha sido buscada.</li>
<li><code>geo</code> localización de clase carácter, puede ser <em>world</em> o un código de país.</li>
<li><code>gprop</code>, producto seleccionado. En consonancia con lo explicado anteriormente. Por defecto es web.</li>
<li><code>category</code>, código de categoría; consultar <code>data("categories")</code> para conocer todos los códigos.</li>
</ul>
</div>
<div id="otros-datos-interesantes" class="section level3">
<h3>Otros datos interesantes</h3>
<ul>
<li><code>related_topics</code>, que proporciona información sobre temas relacionados con la palabra clave.</li>
<li><code>related_queries</code>, que de forma similar al caso anterior muestra las búsquedas relacionadas.</li>
<li><code>interest_by_country</code>, interés del término por país.</li>
<li><code>interest_by_region</code>, interés del término por región.</li>
<li><code>interest_by_city</code>, interés del término por ciudad.</li>
</ul>
</div>
</div>
<div id="representar-como-gráfico" class="section level2">
<h2>Representar como gráfico</h2>
<p>Obtenemos los datos de Google Trends, y los almacenamos en un <em>dataframe</em>, reteniendo solo los campos 1 y 2 del mismo.</p>
<pre class="r"><code># manipular datos

es_trends &lt;- gtrends(keyword=&quot;Valencia CF&quot;, geo=&quot;ES&quot;, time=&quot;today 12-m&quot;)
head(es_trends, 25)</code></pre>
<pre><code>$interest_over_time
         date hits     keyword geo       time gprop category
1  2020-01-19   90 Valencia CF  ES today 12-m   web        0
2  2020-01-26  100 Valencia CF  ES today 12-m   web        0
3  2020-02-02   75 Valencia CF  ES today 12-m   web        0
4  2020-02-09   55 Valencia CF  ES today 12-m   web        0
5  2020-02-16   93 Valencia CF  ES today 12-m   web        0
6  2020-02-23   64 Valencia CF  ES today 12-m   web        0
7  2020-03-01   46 Valencia CF  ES today 12-m   web        0
8  2020-03-08   65 Valencia CF  ES today 12-m   web        0
9  2020-03-15   18 Valencia CF  ES today 12-m   web        0
10 2020-03-22   15 Valencia CF  ES today 12-m   web        0
11 2020-03-29   13 Valencia CF  ES today 12-m   web        0
12 2020-04-05   14 Valencia CF  ES today 12-m   web        0
13 2020-04-12   13 Valencia CF  ES today 12-m   web        0
14 2020-04-19   19 Valencia CF  ES today 12-m   web        0
15 2020-04-26   14 Valencia CF  ES today 12-m   web        0
16 2020-05-03   16 Valencia CF  ES today 12-m   web        0
17 2020-05-10   14 Valencia CF  ES today 12-m   web        0
18 2020-05-17   13 Valencia CF  ES today 12-m   web        0
19 2020-05-24   19 Valencia CF  ES today 12-m   web        0
20 2020-05-31   19 Valencia CF  ES today 12-m   web        0
21 2020-06-07   35 Valencia CF  ES today 12-m   web        0
22 2020-06-14   41 Valencia CF  ES today 12-m   web        0
23 2020-06-21   49 Valencia CF  ES today 12-m   web        0
24 2020-06-28   77 Valencia CF  ES today 12-m   web        0
25 2020-07-05   50 Valencia CF  ES today 12-m   web        0
26 2020-07-12   54 Valencia CF  ES today 12-m   web        0
27 2020-07-19   46 Valencia CF  ES today 12-m   web        0
28 2020-07-26   38 Valencia CF  ES today 12-m   web        0
29 2020-08-02   46 Valencia CF  ES today 12-m   web        0
30 2020-08-09   55 Valencia CF  ES today 12-m   web        0
31 2020-08-16   69 Valencia CF  ES today 12-m   web        0
32 2020-08-23   58 Valencia CF  ES today 12-m   web        0
33 2020-08-30   49 Valencia CF  ES today 12-m   web        0
34 2020-09-06   43 Valencia CF  ES today 12-m   web        0
35 2020-09-13   72 Valencia CF  ES today 12-m   web        0
36 2020-09-20   51 Valencia CF  ES today 12-m   web        0
37 2020-09-27   72 Valencia CF  ES today 12-m   web        0
38 2020-10-04   55 Valencia CF  ES today 12-m   web        0
39 2020-10-11   38 Valencia CF  ES today 12-m   web        0
40 2020-10-18   42 Valencia CF  ES today 12-m   web        0
41 2020-10-25   26 Valencia CF  ES today 12-m   web        0
42 2020-11-01   39 Valencia CF  ES today 12-m   web        0
43 2020-11-08   49 Valencia CF  ES today 12-m   web        0
44 2020-11-15   21 Valencia CF  ES today 12-m   web        0
45 2020-11-22   46 Valencia CF  ES today 12-m   web        0
46 2020-11-29   22 Valencia CF  ES today 12-m   web        0
47 2020-12-06   44 Valencia CF  ES today 12-m   web        0
48 2020-12-13   47 Valencia CF  ES today 12-m   web        0
49 2020-12-20   38 Valencia CF  ES today 12-m   web        0
50 2020-12-27   42 Valencia CF  ES today 12-m   web        0
51 2021-01-03   52 Valencia CF  ES today 12-m   web        0
52 2021-01-10   66 Valencia CF  ES today 12-m   web        0

$interest_by_country
NULL

$interest_by_region
              location hits     keyword geo gprop
1  Valencian Community  100 Valencia CF  ES   web
2             La Rioja    8 Valencia CF  ES   web
3              Navarre    6 Valencia CF  ES   web
4    Castile-La Mancha    6 Valencia CF  ES   web
5               Aragon    6 Valencia CF  ES   web
6     Balearic Islands    5 Valencia CF  ES   web
7            Andalusia    5 Valencia CF  ES   web
8     Region of Murcia    5 Valencia CF  ES   web
9    Castile and LeÃ³n    5 Valencia CF  ES   web
10           Catalonia    5 Valencia CF  ES   web
11 Community of Madrid    4 Valencia CF  ES   web
12      Canary Islands    3 Valencia CF  ES   web
13            Asturias    3 Valencia CF  ES   web
14         Extremadura    3 Valencia CF  ES   web
15      Basque Country    3 Valencia CF  ES   web
16             Galicia    3 Valencia CF  ES   web
17             Melilla    3 Valencia CF  ES   web
18           Cantabria    2 Valencia CF  ES   web
19               Ceuta    1 Valencia CF  ES   web

$interest_by_dma
NULL

$interest_by_city
                   location hits     keyword geo gprop
1                 L&#39;Olleria  100 Valencia CF  ES   web
2                    Canals   84 Valencia CF  ES   web
3                Carcaixent   71 Valencia CF  ES   web
4                   Alginet   66 Valencia CF  ES   web
5             El Perellonet   NA Valencia CF  ES   web
6                   Moncada   66 Valencia CF  ES   web
7                   XÃ tiva   59 Valencia CF  ES   web
8                    PuÃ§ol   58 Valencia CF  ES   web
9                    Aldaia   58 Valencia CF  ES   web
10              RafelbuÃ±ol   56 Valencia CF  ES   web
11                    Sueca   56 Valencia CF  ES   web
12                   Alzira   56 Valencia CF  ES   web
13 Tavernes de la Valldigna   56 Valencia CF  ES   web
14                Xirivella   54 Valencia CF  ES   web
15                Picassent   50 Valencia CF  ES   web
16                   Carlet   50 Valencia CF  ES   web
17                 AlaquÃ s   50 Valencia CF  ES   web
18                  BÃ©tera   48 Valencia CF  ES   web
19                Burjassot   47 Valencia CF  ES   web
20                  Sagunto   47 Valencia CF  ES   web
21                AlgemesÃ­   NA Valencia CF  ES   web
22                  Cullera   47 Valencia CF  ES   web
23     La Pobla de Vallbona   45 Valencia CF  ES   web
24      Riba-roja de TÃºria   45 Valencia CF  ES   web
25               La Canyada   41 Valencia CF  ES   web
26           Port de Sagunt   41 Valencia CF  ES   web
27                  Torrent   38 Valencia CF  ES   web
28                 Valencia   37 Valencia CF  ES   web
29                   Gandia   31 Valencia CF  ES   web
30                Ontinyent   28 Valencia CF  ES   web
31   CastellÃ³n de la Plana    8 Valencia CF  ES   web
32                 Alicante    3 Valencia CF  ES   web
33                Barcelona    2 Valencia CF  ES   web
34                  MÃ¡laga   NA Valencia CF  ES   web
35                  Seville    1 Valencia CF  ES   web
36                   Madrid    1 Valencia CF  ES   web

$related_topics
    subject related_topics                        value geo     keyword
1       100            top                  Valencia CF  ES Valencia CF
2         8            top                     Valencia  ES Valencia CF
3         6            top                   Supersport  ES Valencia CF
4         2            top                  Town square  ES Valencia CF
5         2            top               Las Provincias  ES Valencia CF
6         2            top                   Basketball  ES Valencia CF
7         1            top           Deporte Valenciano  ES Valencia CF
8         1            top                   Levante UD  ES Valencia CF
9         1            top              Valencia Basket  ES Valencia CF
10        1            top                  Levante-EMV  ES Valencia CF
11        1            top                Villarreal CF  ES Valencia CF
12        1            top                   Granada CF  ES Valencia CF
13       &lt;1            top                    CÃ¡diz CF  ES Valencia CF
14       &lt;1            top                Atalanta B.C.  ES Valencia CF
15       &lt;1            top              Transfer window  ES Valencia CF
16       &lt;1            top       Tottenham Hotspur F.C.  ES Valencia CF
17       &lt;1            top                  Javi Gracia  ES Valencia CF
18       &lt;1            top                CD CastellÃ³n  ES Valencia CF
19       &lt;1            top                   RB Leipzig  ES Valencia CF
20       &lt;1            top Cultural y Deportiva Leonesa  ES Valencia CF
21       &lt;1            top               HÃ©ctor GÃ³mez  ES Valencia CF
22       &lt;1            top         Bernardo EspaÃ±a Edo  ES Valencia CF
23 Breakout         rising                Atalanta B.C.  ES Valencia CF
24 Breakout         rising                  Javi Gracia  ES Valencia CF
25 Breakout         rising                   RB Leipzig  ES Valencia CF
26 Breakout         rising Cultural y Deportiva Leonesa  ES Valencia CF
27 Breakout         rising         Bernardo EspaÃ±a Edo  ES Valencia CF
28  +3,300%         rising                  Terrassa FC  ES Valencia CF
29  +3,250%         rising                         Voro  ES Valencia CF
30  +3,150%         rising                UroÅ¡ RaÄ\215iÄ‡  ES Valencia CF
31    +900%         rising       Tottenham Hotspur F.C.  ES Valencia CF
32    +600%         rising                CD CastellÃ³n  ES Valencia CF
33    +450%         rising              Transfer window  ES Valencia CF
34    +350%         rising                    CÃ¡diz CF  ES Valencia CF
35    +350%         rising               HÃ©ctor GÃ³mez  ES Valencia CF
36    +150%         rising               Las Provincias  ES Valencia CF
37    +120%         rising                   Granada CF  ES Valencia CF
38     +70%         rising                  Levante-EMV  ES Valencia CF
39     +70%         rising                  Town square  ES Valencia CF
40     +60%         rising                   Basketball  ES Valencia CF
41     +60%         rising              Valencia Basket  ES Valencia CF
   category
1         0
2         0
3         0
4         0
5         0
6         0
7         0
8         0
9         0
10        0
11        0
12        0
13        0
14        0
15        0
16        0
17        0
18        0
19        0
20        0
21        0
22        0
23        0
24        0
25        0
26        0
27        0
28        0
29        0
30        0
31        0
32        0
33        0
34        0
35        0
36        0
37        0
38        0
39        0
40        0
41        0

$related_queries
    subject related_queries                             value geo     keyword
1       100             top              noticias valencia cf  ES Valencia CF
2        71             top          superdeporte valencia cf  ES Valencia CF
3        70             top                      superdeporte  ES Valencia CF
4        64             top              valencia cf fichajes  ES Valencia CF
5        63             top                          fichajes  ES Valencia CF
6        60             top                 fichajes valencia  ES Valencia CF
7        53             top                    marca valencia  ES Valencia CF
8        47             top                 marca valencia cf  ES Valencia CF
9        42             top                         madrid cf  ES Valencia CF
10       37             top                   valencia cf hoy  ES Valencia CF
11       32             top                       as valencia  ES Valencia CF
12       30             top                    valencia plaza  ES Valencia CF
13       29             top                    as valencia cf  ES Valencia CF
14       26             top       plaza deportiva valencia cf  ES Valencia CF
15       26             top                       valencia fc  ES Valencia CF
16       25             top                   plaza deportiva  ES Valencia CF
17       24             top              coronavirus valencia  ES Valencia CF
18       24             top        las provincias valencia cf  ES Valencia CF
19       23             top          noticias del valencia cf  ES Valencia CF
20       22             top                deporte valenciano  ES Valencia CF
21       20             top                    las provincias  ES Valencia CF
22       20             top               valencia cf twitter  ES Valencia CF
23       19             top    deporte valenciano valencia cf  ES Valencia CF
24       16             top              eldesmarque valencia  ES Valencia CF
25       16             top             desmarque valencia cf  ES Valencia CF
26 Breakout          rising              coronavirus valencia  ES Valencia CF
27 Breakout          rising             espaÃ±eta valencia cf  ES Valencia CF
28 Breakout          rising           mascarillas valencia cf  ES Valencia CF
29 Breakout          rising fichajes valencia cf Ãºltima hora  ES Valencia CF
30 Breakout          rising            mascarilla valencia cf  ES Valencia CF
31 Breakout          rising   valencia c. f. contra barcelona  ES Valencia CF
32    +650%          rising                         tottenham  ES Valencia CF
33    +650%          rising             venta del valencia cf  ES Valencia CF
34    +250%          rising       cuando juega el valencia cf  ES Valencia CF
35    +200%          rising                     real sociedad  ES Valencia CF
36    +200%          rising                atletico de madrid  ES Valencia CF
37    +140%          rising      noticias del valencia cf hoy  ES Valencia CF
38    +140%          rising                          elche cf  ES Valencia CF
39    +130%          rising                        granada cf  ES Valencia CF
40    +120%          rising               valencia cf twitter  ES Valencia CF
41    +120%          rising                          atletico  ES Valencia CF
42    +110%          rising             valencia cf jugadores  ES Valencia CF
43    +100%          rising                       levante emv  ES Valencia CF
44    +100%          rising  ultimas noticias del valencia cf  ES Valencia CF
45     +90%          rising     noticias valencia cf fichajes  ES Valencia CF
46     +70%          rising        las provincias valencia cf  ES Valencia CF
47     +70%          rising                          cadiz cf  ES Valencia CF
48     +60%          rising          noticias del valencia cf  ES Valencia CF
49     +60%          rising                    las provincias  ES Valencia CF
50     +60%          rising              eldesmarque valencia  ES Valencia CF
   category
1         0
2         0
3         0
4         0
5         0
6         0
7         0
8         0
9         0
10        0
11        0
12        0
13        0
14        0
15        0
16        0
17        0
18        0
19        0
20        0
21        0
22        0
23        0
24        0
25        0
26        0
27        0
28        0
29        0
30        0
31        0
32        0
33        0
34        0
35        0
36        0
37        0
38        0
39        0
40        0
41        0
42        0
43        0
44        0
45        0
46        0
47        0
48        0
49        0
50        0</code></pre>
<pre class="r"><code>df1 &lt;- es_trends$interest_over_time[,1:2]</code></pre>
<p>Si deseamos pedir ayuda, # Pedir ayuda y ver `<code>?gtrends()</code>. Finalmente creamos el gráfico… veces que han salido en las noticias (datos de Google Trends) el Valencia CF.</p>
<pre class="r"><code>highchart() %&gt;% 
     hc_chart(type = &#39;line&#39;) %&gt;% 
     hc_xAxis(categories = as.Date(df1$date)) %&gt;% 
     hc_add_series(df1$hits, name=&#39;hits Valencia CF&#39;) %&gt;% #*** API
     hc_credits(enabled=TRUE, text=&#39;InvestigaOnline.com&#39;, href =&#39;https://www.investigaonline.com&#39;) %&gt;%
     hc_exporting(enabled=TRUE)</code></pre>
<div id="htmlwidget-1" style="width:100%;height:500px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"hc_opts":{"chart":{"reflow":true,"type":"line"},"title":{"text":null},"yAxis":{"title":{"text":null}},"credits":{"enabled":true,"text":"InvestigaOnline.com","href":"https://www.investigaonline.com"},"exporting":{"enabled":true},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"xAxis":{"categories":["2020-01-19","2020-01-26","2020-02-02","2020-02-09","2020-02-16","2020-02-23","2020-03-01","2020-03-08","2020-03-15","2020-03-22","2020-03-29","2020-04-05","2020-04-12","2020-04-19","2020-04-26","2020-05-03","2020-05-10","2020-05-17","2020-05-24","2020-05-31","2020-06-07","2020-06-14","2020-06-21","2020-06-28","2020-07-05","2020-07-12","2020-07-19","2020-07-26","2020-08-02","2020-08-09","2020-08-16","2020-08-23","2020-08-30","2020-09-06","2020-09-13","2020-09-20","2020-09-27","2020-10-04","2020-10-11","2020-10-18","2020-10-25","2020-11-01","2020-11-08","2020-11-15","2020-11-22","2020-11-29","2020-12-06","2020-12-13","2020-12-20","2020-12-27","2021-01-03","2021-01-10"]},"series":[{"data":[90,100,75,55,93,64,46,65,18,15,13,14,13,19,14,16,14,13,19,19,35,41,49,77,50,54,46,38,46,55,69,58,49,43,72,51,72,55,38,42,26,39,49,21,46,22,44,47,38,42,52,66],"name":"hits Valencia CF"}]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","drillUpText":"Back to {series.name}","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"thousandsSep":" ","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
<p>¿Hacemos ahora otra b´suqeda pero con más términos y la representamos en el mismo gráfico? Lo hacemos de una vez; fíjate en las diferencias.</p>
<pre class="r"><code>es_trends &lt;- gtrends(c(&quot;Liga Santander&quot;), geo = c(&quot;ES&quot;), gprop = &quot;web&quot;, hl=&quot;es&quot;, time = &quot;today 3-m&quot;)
df1 &lt;- es_trends$interest_over_time[,1:2]
es_trends &lt;- gtrends(c(&quot;Premier League&quot;), geo = c(&quot;ES&quot;), gprop = &quot;web&quot;, hl=&quot;es&quot;, time = &quot;today 3-m&quot;)
df2 &lt;- es_trends$interest_over_time[,1:2]
es_trends &lt;- gtrends(c(&quot;Bundesliga&quot;), geo = c(&quot;ES&quot;), gprop = &quot;web&quot;, hl=&quot;es&quot;, time = &quot;today 3-m&quot;)
df3 &lt;- es_trends$interest_over_time[,1:2]

highchart() %&gt;% 
        hc_chart(type = &#39;line&#39;) %&gt;% 
        hc_xAxis(categories = as.Date(c(df1$date, df2$date, df3$date))) %&gt;% 
        hc_add_series(df1$hits, name=&#39;hits Liga Santander&#39;, marker=list(enabled=FALSE), color=&#39;salmon&#39;) %&gt;% #&lt;&lt;
        hc_add_series(df2$hits, name=&#39;hits Premier League&#39;, marker=list(enabled=FALSE), color=&#39;cadetblue&#39;) %&gt;% #&lt;&lt;
        hc_add_series(df3$hits, name=&#39;hits Bundesliga&#39;, marker=list(enabled=FALSE), color=&#39;green&#39;) %&gt;% #&lt;&lt;
        hc_credits(enabled=TRUE, text=&#39;InvestigaOnline.com&#39;, href =&#39;https://www.investigaonline.com&#39;) %&gt;%
        hc_exporting(enabled=TRUE)</code></pre>
<div id="htmlwidget-2" style="width:100%;height:500px;" class="highchart html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"hc_opts":{"chart":{"reflow":true,"type":"line"},"title":{"text":null},"yAxis":{"title":{"text":null}},"credits":{"enabled":true,"text":"InvestigaOnline.com","href":"https://www.investigaonline.com"},"exporting":{"enabled":true},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0},"treemap":{"layoutAlgorithm":"squarified"}},"xAxis":{"categories":["2020-10-14","2020-10-15","2020-10-16","2020-10-17","2020-10-18","2020-10-19","2020-10-20","2020-10-21","2020-10-22","2020-10-23","2020-10-24","2020-10-25","2020-10-26","2020-10-27","2020-10-28","2020-10-29","2020-10-30","2020-10-31","2020-11-01","2020-11-02","2020-11-03","2020-11-04","2020-11-05","2020-11-06","2020-11-07","2020-11-08","2020-11-09","2020-11-10","2020-11-11","2020-11-12","2020-11-13","2020-11-14","2020-11-15","2020-11-16","2020-11-17","2020-11-18","2020-11-19","2020-11-20","2020-11-21","2020-11-22","2020-11-23","2020-11-24","2020-11-25","2020-11-26","2020-11-27","2020-11-28","2020-11-29","2020-11-30","2020-12-01","2020-12-02","2020-12-03","2020-12-04","2020-12-05","2020-12-06","2020-12-07","2020-12-08","2020-12-09","2020-12-10","2020-12-11","2020-12-12","2020-12-13","2020-12-14","2020-12-15","2020-12-16","2020-12-17","2020-12-18","2020-12-19","2020-12-20","2020-12-21","2020-12-22","2020-12-23","2020-12-24","2020-12-25","2020-12-26","2020-12-27","2020-12-28","2020-12-29","2020-12-30","2020-12-31","2021-01-01","2021-01-02","2021-01-03","2021-01-04","2021-01-05","2021-01-06","2021-01-07","2021-01-08","2021-01-09","2021-01-10","2021-01-11","2021-01-12","2020-10-14","2020-10-15","2020-10-16","2020-10-17","2020-10-18","2020-10-19","2020-10-20","2020-10-21","2020-10-22","2020-10-23","2020-10-24","2020-10-25","2020-10-26","2020-10-27","2020-10-28","2020-10-29","2020-10-30","2020-10-31","2020-11-01","2020-11-02","2020-11-03","2020-11-04","2020-11-05","2020-11-06","2020-11-07","2020-11-08","2020-11-09","2020-11-10","2020-11-11","2020-11-12","2020-11-13","2020-11-14","2020-11-15","2020-11-16","2020-11-17","2020-11-18","2020-11-19","2020-11-20","2020-11-21","2020-11-22","2020-11-23","2020-11-24","2020-11-25","2020-11-26","2020-11-27","2020-11-28","2020-11-29","2020-11-30","2020-12-01","2020-12-02","2020-12-03","2020-12-04","2020-12-05","2020-12-06","2020-12-07","2020-12-08","2020-12-09","2020-12-10","2020-12-11","2020-12-12","2020-12-13","2020-12-14","2020-12-15","2020-12-16","2020-12-17","2020-12-18","2020-12-19","2020-12-20","2020-12-21","2020-12-22","2020-12-23","2020-12-24","2020-12-25","2020-12-26","2020-12-27","2020-12-28","2020-12-29","2020-12-30","2020-12-31","2021-01-01","2021-01-02","2021-01-03","2021-01-04","2021-01-05","2021-01-06","2021-01-07","2021-01-08","2021-01-09","2021-01-10","2021-01-11","2021-01-12","2020-10-14","2020-10-15","2020-10-16","2020-10-17","2020-10-18","2020-10-19","2020-10-20","2020-10-21","2020-10-22","2020-10-23","2020-10-24","2020-10-25","2020-10-26","2020-10-27","2020-10-28","2020-10-29","2020-10-30","2020-10-31","2020-11-01","2020-11-02","2020-11-03","2020-11-04","2020-11-05","2020-11-06","2020-11-07","2020-11-08","2020-11-09","2020-11-10","2020-11-11","2020-11-12","2020-11-13","2020-11-14","2020-11-15","2020-11-16","2020-11-17","2020-11-18","2020-11-19","2020-11-20","2020-11-21","2020-11-22","2020-11-23","2020-11-24","2020-11-25","2020-11-26","2020-11-27","2020-11-28","2020-11-29","2020-11-30","2020-12-01","2020-12-02","2020-12-03","2020-12-04","2020-12-05","2020-12-06","2020-12-07","2020-12-08","2020-12-09","2020-12-10","2020-12-11","2020-12-12","2020-12-13","2020-12-14","2020-12-15","2020-12-16","2020-12-17","2020-12-18","2020-12-19","2020-12-20","2020-12-21","2020-12-22","2020-12-23","2020-12-24","2020-12-25","2020-12-26","2020-12-27","2020-12-28","2020-12-29","2020-12-30","2020-12-31","2021-01-01","2021-01-02","2021-01-03","2021-01-04","2021-01-05","2021-01-06","2021-01-07","2021-01-08","2021-01-09","2021-01-10","2021-01-11","2021-01-12"]},"series":[{"data":[4,6,12,98,82,11,5,5,6,16,82,61,18,7,3,8,23,91,74,23,5,4,7,18,75,88,18,5,2,4,4,8,4,3,3,3,5,16,89,72,18,8,5,5,16,85,89,19,8,6,5,20,97,78,20,9,4,6,21,88,88,22,32,34,16,22,100,87,23,60,65,21,15,15,11,11,62,71,38,19,88,100,29,14,33,15,24,92,66,30,33],"name":"hits Liga Santander","marker":{"enabled":false},"color":"salmon"},{"data":[{"name":"<1","y":1},{"name":"10","y":4},{"name":"100","y":1},{"name":"13","y":2},{"name":"14","y":5},{"name":"15","y":4},{"name":"16","y":2},{"name":"17","y":3},{"name":"18","y":3},{"name":"19","y":1},{"name":"2","y":1},{"name":"22","y":1},{"name":"23","y":3},{"name":"24","y":1},{"name":"25","y":1},{"name":"26","y":1},{"name":"27","y":1},{"name":"28","y":2},{"name":"39","y":1},{"name":"4","y":8},{"name":"40","y":1},{"name":"41","y":2},{"name":"43","y":1},{"name":"48","y":1},{"name":"5","y":2},{"name":"51","y":3},{"name":"52","y":1},{"name":"54","y":1},{"name":"56","y":1},{"name":"57","y":2},{"name":"58","y":1},{"name":"59","y":1},{"name":"6","y":5},{"name":"61","y":1},{"name":"62","y":1},{"name":"64","y":1},{"name":"65","y":1},{"name":"66","y":1},{"name":"67","y":1},{"name":"7","y":5},{"name":"73","y":1},{"name":"76","y":1},{"name":"77","y":1},{"name":"8","y":4},{"name":"9","y":4},{"name":"90","y":1}],"name":"hits Premier League","marker":{"enabled":false},"color":"cadetblue"},{"data":[5,16,10,62,39,13,3,6,11,23,53,40,22,19,8,2,29,38,50,18,8,7,1,20,100,53,19,2,3,5,5,14,2,5,2,2,9,8,74,45,16,6,7,1,17,51,40,8,5,11,3,28,96,40,24,22,6,9,28,56,51,12,20,57,21,14,63,51,13,14,17,0,8,23,5,8,5,8,16,15,72,70,26,2,21,7,42,91,48,20,13],"name":"hits Bundesliga","marker":{"enabled":false},"color":"green"}]},"theme":{"chart":{"backgroundColor":"transparent"},"colors":["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","drillUpText":"Back to {series.name}","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"thousandsSep":" ","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
<p>Y hasta aquí este post. Espero sea de utilidad. Como siempre decimos… ¡explora y experimenta!</p>
</div>
